import Dumper from'../../dumper.js';(function(options){const tagName='context-span';const version='0.1.0';const GlobalConfig=window?._icroot?.config?.ContextSpan||{};const DumperOptions={};if(window.location.hostname.split('.').pop()=='local')DumperOptions['level']='INFO';if(GlobalConfig?.dumper?.level)DumperOptions['level']=GlobalConfig?.dumper?.level;class ContextSpan extends HTMLElement{#logger;constructor(){super();Object.defineProperty(this,'VERSION',{value:version,writable:false});Object.defineProperty(this.constructor,'VERSION',{value:version,writable:false});let shadow=this.attachShadow({mode:'closed'});this.shadow=shadow;const style=document.createElement('style');const span=document.createElement('span');span.textContent=this.textContent;const styles={original:'',default:'',playground:'',};styles.original=`
:host {
    all: initial;
    font-family: inherit;
    contain: content;
}

span:hover {
    text-decoration: underline;
}
:host-context(h1) {
    font-style: italic;
}
:host-context(h1):after {
    content: " - no links in headers!"
}
:host-context(article, aside) {
    color: gray;
}
:host(.footer) {
    color : red;
}
:host {
    background: rgba(0,0,0,0.1);
    padding: 2px 5px;
}
`;styles.default=`
:host {
    all: initial;
    font-family: inherit;
    contain: content;
}

span:hover {
    text-decoration: underline;
    color: purple;
}
:host-context(h1) {
    font-style: italic;
    font-size: 24px;
}
:host-context(h1):after {
    display: block;
    content: " - no links in headers!";
    width: 100px;
}
:host(.footer1) {
    all:inherit;
}
:host(.footer) {
    color : red;
}
:host-context(div) {
    background: rgba(0,0,0,0.1);
    padding: 2px 5px;
}
:host(.theme) {
    background: white;
    padding: 2px 5px;
    color: pink;
}
`;style.playground=`
:host {
    all: initial;
    font-family: inherit;
    contain: content;
}
:host(.footer) {
    color : red;
}

:host-context(article) span {
    font-weight: light;
    color: red;
    font-size: 48px;
    text-shadow: 10px 10px 10px pink solid;
    background: pink;
}
:host-context(.theme) {
    font-weight: bold;
    color: green;
    font-size: 24px;
    text-shadow: 10px 10px 10px pink solid;
    background: yellow;
}
`;style.textContent=styles.default;shadow.appendChild(style);shadow.appendChild(span);this.#logger=Dumper.get(this.constructor.name,DumperOptions);this.#logger.info('version',version);this.watch('textContent',(data)=>{this.#logger.debug('textContent',data,this.textContent);this.updateText();});}
connectedCallback(){window.document.head.querySelector(`#${tagName}-preloader`)?.remove();this.updateText();}
disconnectedCallback(){}
adoptedCallback(){}
attributeChangedCallback(name,oldValue,newValue){}
updateText(){this.#logger.debug('updateText',{'thisTextContent':this.textContent,'shadowSpanTextContent':this.shadow.querySelector('span').textContent,});this.shadow.querySelector('span').textContent=this.textContent;}}
if(GlobalConfig?.preloader!==false&&(options?.preloader===true||GlobalConfig?.preloader==true))(()=>{const styleHide=document.createElement('style');styleHide.id=`${tagName}-preloader`;styleHide.textContent=`${tagName}:not(:defined){visibility:hidden;}`;window.document.head.appendChild(styleHide);})();customElements.define(tagName,ContextSpan);})({preloader:true,});