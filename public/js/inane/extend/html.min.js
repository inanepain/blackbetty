for(let element of[HTMLCollection,NodeList]){if(!element.prototype.toArray){element.prototype.toArray=function(){return Array.from(this)}}}
for(let element of[Document,HTMLElement,ShadowRoot,HTMLDocument]){if(!element.prototype.iqs){element.prototype.iqs=function(selectors){const el=this?.querySelector?this:window.document;return el.querySelector(selectors)}}
if(!window.iqs&&window.document.iqs)window.iqs=window.document.iqs;if(!element.prototype.iqsa){element.prototype.iqsa=function(selectors){const el=this?.querySelectorAll?this:window.document;return Array.from(el.querySelectorAll(selectors))}}
if(!window.iqsa&&window.document.iqsa)window.iqsa=window.document.iqsa;if(!element.prototype.iq){element.prototype.iq=function(selectors){const dynamic=selectors.startsWith('@@');if(dynamic)selectors=selectors.substring(2);const cmd=selectors.startsWith('@')||selectors.split(' ').pop().charAt(0)==="#"&&!selectors.includes(',')?'querySelector':'querySelectorAll';if(selectors.startsWith('@'))selectors=selectors.substring(1);const el=this?.[cmd]?this:window.document;result=el[cmd](selectors);result=cmd=='querySelector'?result:Array.from(result);if(dynamic)return Array.isArray(result)?(result.length==1?result.pop():result):result;return result}}
if(!window.iq&&window.document.iq)window.iq=window.document.iq}